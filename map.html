<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Networking the Revolution</title>

  <!-- Stylesheets -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    #mymap {
      height: 90vh;
      width: 100%;
      margin-top: 0px;
      z-index: 1000;
    }
    .modal-dialog {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }
  </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container px-3">
    <a class="navbar-brand" href="index.html">Networking the Revolution</a>
  </div>
</nav>

<!-- Map Container -->
<div id="mymap"></div>

<!-- Footer -->
<footer class="py-4 bg-dark text-white text-center">
  <div class="container">
    <p class="m-0">Copyright &copy; <i>Networking the Revolution</i>, 2024â€“2025</p>
    <p class="m-0">Michigan State University</p>
  </div>
</footer>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Networking Letters</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        This map displays every sender and receiver location from our letter dataset.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<!-- Include marker data -->
<script src="js/letterMarkers_full.js"></script> <!-- Update path if placed elsewhere -->

<!-- Map Logic -->
<script>
  const map = L.map('mymap').setView([56.4907, -4.2026], 5.5);

  L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 18,
    attribution: '&copy; OpenStreetMap'
  }).addTo(map);

  // Add all markers
  letterMarkers.forEach(entry => {
    L.marker(entry.coords).addTo(map)
      .bindPopup(entry.popup);
  });

  // Launch modal on page load
  document.addEventListener("DOMContentLoaded", function () {
    const myModal = new bootstrap.Modal(document.getElementById('myModal'));
    myModal.show();
  });
</script>
</body>
</html>
